$(function () {
    tinymce.PluginManager.add("alto_spoiler", function (t, e) {
        t.addCommand("InsertSpoiler", function () {

            t.windowManager.open({
                title: ls.lang.get('panel_spoiler'),
                body: [
                    {type: "textbox", name: "text", multiline:true, size: 100, minHeight: 150, label: ls.lang.get("panel_spoiler_text"), value: ''},
                ],
                onsubmit: function (e) {
                    var text = e.data.text || 'spoiler text';

                    var content = '<alto:spoiler title="'+ls.lang.get("panel_spoiler_title")+'" style="border: 1px dotted #3A3A3A; background: #d5d5d5; display: block;"><p>'+text+'</p></alto:spoiler>';
                    t.insertContent(content);
                }
            });

        });

    });
})


