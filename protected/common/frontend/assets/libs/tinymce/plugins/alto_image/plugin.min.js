/**
 * plugin.js
 *
 */

/*global tinymce:true */

tinymce.PluginManager.add('alto_image', function (editor) {

    function showDialog(imageList) {

        var modalWindow = jQuery('#js-alto-image-manager');
        if (!modalWindow.length) {
            // old style skin
            modalWindow = jQuery('#js-alto-image-manager');
        }

        ls.insertToEditor = function(markup) {
            editor.insertContent(markup);
        }
        if (modalWindow.modal) {
            modalWindow.modal('show');
        } else {
            modalWindow.jqmShow();
        }
    }

    editor.addButton('alto_image', {
        icon: 'image',
        tooltip: 'Insert/edit image',
        onclick: showDialog,
        stateSelector: 'img:not([data-mce-object])'
    });

});

