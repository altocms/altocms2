(function(h){function k(d,a,f){var l=0,e=[];f=f||d.querySelectorAll(a.itemSelector);for(var q=f.length,b=0;b<q;++b)f[b].removeAttribute("style"),f[b].classList?f[b].classList.remove(a.firstItemClass,a.lastRowClass):f[b].className=f[b].className.replace(RegExp("(^|\\b)"+a.firstItemClass+"|"+a.lastRowClass+"(\\b|$)","gi")," ");d=d.clientWidth-parseFloat(h(d).css("padding-left"))-parseFloat(h(d).css("padding-right"));for(var r=[],b=0;b<q;++b)r[b]={outerWidth:f[b].offsetWidth,height:f[b].offsetHeight};
for(b=0;b<q;++b){l+=r[b].outerWidth;e.push(f[b]);if(b===q-1)for(var c=0;c<e.length;c++)0===c&&(e[c].className+=" "+a.lastRowClass),e[c].style.marginRight=c<e.length-1?a.minMargin+"px":0;if(l+a.maxMargin*(e.length-1)>d){var m=l+a.maxMargin*(e.length-1)-d,c=e.length;if((a.maxMargin-a.minMargin)*(c-1)<m)var k=a.minMargin,m=m-(a.maxMargin-a.minMargin)*(c-1);else k=a.maxMargin-m/(c-1),m=0;for(var s,n=0,c=0;c<e.length;c++){s=e[c];var p=r[b+parseInt(c)-e.length+1].outerWidth,g=p-p/l*m,p=Math.round(r[b+parseInt(c)-
e.length+1].height*(g/p));0.5<=n+1-g%1?(n-=g%1,g=Math.floor(g)):(n+=1-g%1,g=Math.ceil(g));s.style.cssText="width: "+g+"px;height: "+p+"px;margin-right: "+(c<e.length-1?k:0)+"px";0===c&&(s.className+=" "+a.firstItemClass)}e=[];l=0}}}h.fn.rowGrid=function(d){return this.each(function(){$this=h(this);if("appended"===d){d=$this.data("grid-options");var a=$this.children("."+d.lastRowClass),a=a.nextAll().add(a);k(this,d,a)}else if(d=h.extend({},h.fn.rowGrid.defaults,d),$this.data("grid-options",d),k(this,
d),d.resize)h(window).on("resize.rowGrid",{container:this},function(a){k(a.data.container,d)})})};h.fn.rowGrid.defaults={minMargin:null,maxMargin:null,resize:!0,lastRowClass:"last-row",firstItemClass:null}})(jQuery);